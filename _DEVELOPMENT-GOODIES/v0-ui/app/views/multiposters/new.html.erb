<%= form_with(url: "/multipost", method: "post", class: "w-full max-w-3xl mx-auto bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4", data: { controller: "multiposter" }) do |form| %>
  <h2 class="text-2xl font-bold mb-6">Social Media Multiposter</h2>

  <div class="mb-6">
    <%= form.text_area :content, 
        class: "w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none", 
        rows: 5, 
        placeholder: "What's on your mind?",
        data: { 
          multiposter_target: "content",
          action: "input->multiposter#updateCounters"
        } %>
  </div>

  <div class="mb-6">
    <h3 class="text-lg font-medium mb-4">Platforms</h3>
    <div class="space-y-4">
      <% ["bluesky", "mastodon", "threads", "facebook", "x"].each do |platform| %>
        <div class="flex items-center justify-between">
          <div class="flex items-center">
            <%= form.check_box "platforms[]", 
                { 
                  checked: true, 
                  class: "mr-2", 
                  data: { 
                    multiposter_target: "platform",
                    action: "change->multiposter#togglePlatform"
                  }
                }, 
                platform, 
                nil %>
            <%= form.label "platforms_#{platform}", platform.capitalize, class: "font-medium" %>
          </div>
          <div class="flex items-center">
            <span data-multiposter-target="counter" class="text-sm text-gray-500"></span>
          </div>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
          <div data-multiposter-target="progressBar" class="h-full rounded-full"></div>
        </div>
      <% end %>
    </div>
  </div>

  <%= form.submit "Post to Selected Platforms", 
      class: "w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline", 
      data: { multiposter_target: "submitButton" } %>
<% end %>

