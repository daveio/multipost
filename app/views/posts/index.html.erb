<div class="max-w-4xl mx-auto">
  <div class="flex justify-between items-center mb-6">
    <div>
      <h1 class="text-2xl font-bold text-primary">Your Posts</h1>
      <p class="text-secondary">Manage your posts across multiple platforms</p>
    </div>
    
    <%= link_to new_post_path, class: "bg-accent hover:bg-accent-hover text-white py-2 px-4 rounded-lg flex items-center" do %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
      </svg>
      New Post
    <% end %>
  </div>
  
  <div class="bg-surface0 rounded-lg shadow overflow-hidden">
    <!-- Filters and search -->
    <div class="p-4 border-b border-subtle">
      <div class="flex flex-wrap gap-4">
        <button class="px-3 py-1 rounded-full bg-surface1 text-primary">All</button>
        <button class="px-3 py-1 rounded-full text-secondary hover:bg-surface1">Published</button>
        <button class="px-3 py-1 rounded-full text-secondary hover:bg-surface1">Drafts</button>
        <button class="px-3 py-1 rounded-full text-secondary hover:bg-surface1">Failed</button>
      </div>
    </div>
    
    <% if @posts.any? %>
      <div class="divide-y divide-subtle">
        <% @posts.each do |post| %>
          <div class="p-4 hover:bg-surface1 transition-colors">
            <div class="flex justify-between items-start">
              <div class="flex-grow mr-4">
                <p class="text-primary line-clamp-2 mb-2"><%= post.content %></p>
                
                <div class="flex items-center text-sm text-tertiary">
                  <span class="mr-4"><%= time_ago_in_words(post.created_at) %> ago</span>
                  
                  <% if post.thread? %>
                    <span class="flex items-center mr-4">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />
                      </svg>
                      Thread <%= post.thread_position %>
                    </span>
                  <% end %>
                  
                  <span class="flex items-center">
                    <% post.selected_platforms.each do |platform| %>
                      <span class="platform-icon-small <%= platform %> mr-1"></span>
                    <% end %>
                  </span>
                </div>
              </div>
              
              <div class="flex items-center">
                <span class="px-2 py-1 rounded text-xs <%= post.status == 'published' ? 'bg-green-100 text-green-800' : (post.status == 'failed' ? 'bg-red-100 text-red-800' : 'bg-blue-100 text-blue-800') %>">
                  <%= post.status.capitalize %>
                </span>
                
                <div class="dropdown ml-2 relative" data-controller="dropdown">
                  <button data-action="click->dropdown#toggle" class="p-2 text-tertiary hover:text-primary rounded-full hover:bg-surface2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z" />
                    </svg>
                  </button>
                  <div data-dropdown-target="menu" class="hidden absolute right-0 mt-2 w-48 bg-surface0 rounded-md shadow-lg z-10">
                    <%= link_to "View Details", post_path(post), class: "block px-4 py-2 text-sm text-primary hover:bg-surface1" %>

                    <% if post.status == 'failed' %>
                      <%= button_to retry_post_path(post), method: :post, class: "w-full text-left px-4 py-2 text-sm text-primary hover:bg-surface1" do %>
                        <div class="flex items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                          </svg>
                          Retry
                        </div>
                      <% end %>
                    <% end %>

                    <%= link_to "Edit", edit_post_path(post), class: "block px-4 py-2 text-sm text-primary hover:bg-surface1" %>
                    <%= button_to "Delete", post_path(post), method: :delete, class: "w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-surface1", data: { confirm: "Are you sure you want to delete this post?" } %>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="p-8 text-center">
        <div class="mb-4 text-tertiary">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mx-auto">
            <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
          </svg>
        </div>
        <h3 class="text-xl font-medium text-primary mb-2">No posts yet</h3>
        <p class="text-secondary mb-6">Create your first post to share across platforms</p>
        
        <%= link_to new_post_path, class: "bg-accent hover:bg-accent-hover text-white py-2 px-4 rounded-lg inline-flex items-center" do %>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 mr-2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
          Create Post
        <% end %>
      </div>
    <% end %>
  </div>
</div>