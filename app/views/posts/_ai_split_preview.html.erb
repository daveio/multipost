<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" 
     id="ai-split-modal"
     data-controller="modal"
     data-action="keydown.escape->modal#close">
     
  <div class="bg-base rounded-lg shadow-lg max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col"
       data-modal-target="container">
       
    <div class="flex justify-between items-center px-6 py-4 border-b border-subtle">
      <h2 class="text-xl font-medium text-primary">Split post with AI</h2>
      <button type="button" 
              class="text-tertiary hover:text-primary"
              data-action="modal#close">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    
    <div class="overflow-y-auto flex-grow p-6">
      <div class="mb-6">
        <h3 class="text-lg font-medium text-primary mb-2">Choose splitting strategies</h3>
        <p class="text-secondary mb-4">Select one or more ways to split your content for different platforms.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div class="flex items-start">
            <input type="checkbox" id="semantic-strategy" value="semantic" checked
                   class="w-4 h-4 text-accent bg-surface1 border-subtle rounded focus:ring-accent mt-1">
            <label for="semantic-strategy" class="ml-2">
              <span class="font-medium text-primary">Semantic Splitting</span>
              <p class="text-sm text-tertiary">Split by meaning to keep related content together</p>
            </label>
          </div>
          
          <div class="flex items-start">
            <input type="checkbox" id="sentence-strategy" value="sentence"
                   class="w-4 h-4 text-accent bg-surface1 border-subtle rounded focus:ring-accent mt-1">
            <label for="sentence-strategy" class="ml-2">
              <span class="font-medium text-primary">Sentence-based Splitting</span>
              <p class="text-sm text-tertiary">Split at natural sentence boundaries</p>
            </label>
          </div>
          
          <div class="flex items-start">
            <input type="checkbox" id="hashtag-strategy" value="retain_hashtags" checked
                   class="w-4 h-4 text-accent bg-surface1 border-subtle rounded focus:ring-accent mt-1">
            <label for="hashtag-strategy" class="ml-2">
              <span class="font-medium text-primary">Hashtag Retention</span>
              <p class="text-sm text-tertiary">Keep hashtags intact when splitting</p>
            </label>
          </div>
          
          <div class="flex items-start">
            <input type="checkbox" id="mention-strategy" value="preserve_mentions"
                   class="w-4 h-4 text-accent bg-surface1 border-subtle rounded focus:ring-accent mt-1">
            <label for="mention-strategy" class="ml-2">
              <span class="font-medium text-primary">Mention Preservation</span>
              <p class="text-sm text-tertiary">Ensure @mentions stay together</p>
            </label>
          </div>
        </div>
      </div>
      
      <div class="mb-8">
        <h3 class="text-lg font-medium text-primary mb-2">Split Preview</h3>
        <p class="text-secondary mb-4">Select a platform to see how your content will be split.</p>
        
        <div class="flex border-b border-subtle mb-4">
          <% Platform.all.each_with_index do |platform, index| %>
            <button class="px-4 py-2 text-sm font-medium <%= index == 0 ? 'border-b-2 border-accent text-primary' : 'text-secondary' %>"
                    id="platform-tab-<%= platform.name %>"
                    data-platform="<%= platform.name %>">
              <%= platform.name.capitalize %>
            </button>
          <% end %>
        </div>
        
        <div class="space-y-4 split-preview">
          <!-- The split content preview will be shown here -->
          <div class="bg-surface1 p-4 rounded-lg shadow-sm">
            <div class="flex justify-between items-center mb-2">
              <div class="text-sm text-secondary">Post 1/3</div>
              <div class="text-xs text-tertiary">250 characters</div>
            </div>
            <p class="text-primary">Sample split content. This is the first part of your post that will be published as the beginning of a thread...</p>
          </div>
          
          <div class="bg-surface1 p-4 rounded-lg shadow-sm">
            <div class="flex justify-between items-center mb-2">
              <div class="text-sm text-secondary">Post 2/3</div>
              <div class="text-xs text-tertiary">180 characters</div>
            </div>
            <p class="text-primary">This is the second part of your thread with continuation of your thoughts...</p>
          </div>
          
          <div class="bg-surface1 p-4 rounded-lg shadow-sm">
            <div class="flex justify-between items-center mb-2">
              <div class="text-sm text-secondary">Post 3/3</div>
              <div class="text-xs text-tertiary">120 characters</div>
            </div>
            <p class="text-primary">And this is the final part of your thread with the conclusion. #example</p>
          </div>
        </div>
      </div>
      
      <div>
        <h3 class="text-lg font-medium text-primary mb-2">AI Reasoning</h3>
        <div class="bg-surface1 p-4 rounded-lg">
          <p class="text-primary">I split your content keeping the main points together in each post. Hashtags were preserved in the final post, and the content flows naturally from one post to the next.</p>
        </div>
      </div>
    </div>
    
    <div class="px-6 py-4 border-t border-subtle flex justify-end space-x-4">
      <button type="button" 
              class="bg-surface1 hover:bg-surface2 text-primary py-2 px-4 rounded-lg"
              data-action="modal#close">
        Cancel
      </button>
      
      <button type="button" 
              class="bg-accent hover:bg-accent-hover text-white py-2 px-4 rounded-lg"
              id="apply-split-button">
        Create Thread
      </button>
    </div>
  </div>
</div>